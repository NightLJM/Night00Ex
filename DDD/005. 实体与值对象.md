## **5 实体与值对象**

**5.1 前言**

1. 实体：一个实体是一个唯一的东西，并且可以在相当长的一段时间内持续地变化。实体对象和值对象区别就是身份标识和可变性。
2. 唯一表示：
3. 设计实体初期，应当关注其唯一标识和查找，而不是属性和行为，只有对实体的本质特征有用的情况下才加入相应的属性和行为。
4. 实体的唯一性标识可以通过值对象进行管理。

**5.2 实体**

1. 生成唯一性标识的方法:
    1. 用户输入，程序来保证这些初始值的唯一
    2. 程序内部通过算法生成
    3. 程序通过持续化存储，如数据库，来生成唯一标识
    4. 另一个限界上下文(系统或程序)决定出了唯一标识
2. 在聚合的边界之内，可以将缩短后的标识作为实体的本地标识，只需要保证和其他本地标识区分出来即可。而作为聚合根的实体则需要全局的唯一标识。
3. 通过持续化存储生成的缺点时速度慢。
4. 另一个限界上下文决定标识的话，可能需要考虑对象的同步问题。即外部对象的改变如何通知到本地关联对象
5. 标识生成时间：生成对象时或者持久化对象时。具体取决于怎么用的。
6. 未生成标识的实体间的对比
7. 委派标识
8. 层超模型是什么？为什么支持乐观锁
9. 互动：列出一些实体的名字？领域标识和委派标识分别是什么？标识生成方式？哪种生成方式更好？ P166
10. 实体验证：验证属性、验证整体对象、验证对象组合

**5.3 值对象**

1. 应当尽量使用值对象来建模而不是实体对象，为什么？
2. 值对象特征：
    1. 度量或描述领域中的一件东西
    2. 可以作为不变量。  PS：值对象里引用实体，如何保证值对象的不变性
    3. 将不同的相关的属性组合成一个整体概念
    4. 当度量和描述改变时，可以用另一个值对象予以替换
    5. 可以和其他值对象进行相等性比较
    6. 不会对协作对象造成副作用





