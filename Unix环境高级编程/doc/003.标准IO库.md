## **003.标准IO**

### **1 流和FILE对象**

1.1 流的定向
  1. 对于ASCII字符，一个字符用一个字节表示。对于国际字符集，一个字符可能用多个字节表示
  2. 流的定向决定了流的读写的字符是单字节还是多字节
  3. 流最初被创建的时候并没有被定向。若在未定向的流上使用多字节IO函数，则该流的定向就变成宽定向；若使用单字节IO函数，则流的定向变成字节定向
  4. 只有freopen函数和fwide函数可以改变流的定向    

1.2 fwide函数
  1. int fwide(FILE* fp, int mode);
  2. 设置流的定向；若流是宽定向，返回正值；若流是字节定向，返回负值；若流是未定向的，返回0.
  3. mode参数：1）如果mode是负值，fwide试图指定流是字节定向的；2）如果mode是正值，fwide将试图指定流是宽定向的；3）若mode参数位0,fiwde不试图指定流的定向，但返回的标识是该流定向的值。
  4. fwide并不改变已经定向流的定向。fwide无出错返回，因此，在调用fwide前最好先清除errno，从fwide返回时检查errno的值    

1.3 缓冲
  1. 全缓冲：在填满缓冲后才进行实际的IO操作。当在一个流上第一次执行IO操作时，相关IO函数通常要调用malloc获取缓冲区
  2. 行缓冲：在输入和输出中遇到换行符时，执行IO操作。如果填满了缓冲区，即使没有遇到换行符，也会执行IO操作
  3. 不带缓冲：不对字符进行缓存；标准错误流stderr通常是不带缓冲的，因此出错信息能尽快显现出来   
  4. ISO C标准：当且仅当标准输入和输出并不指向交互式设备时，它们才是全缓冲的；标准错误绝不是全缓冲的。     

1.4 函数setbuf和函数setvbuf
  1. 




