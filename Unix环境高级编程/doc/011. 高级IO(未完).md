## **011.高级IO**

**11.1 非阻塞IO**

1. 非阻塞IO即发出open、read和write这样的IO操作，并使这些IO不会永远阻塞。
2. 对于给定的描述符，有两种指定非阻塞IO的方法：
    1. 如果调用open获得描述符，则可以指定O_NONBLOCK。
    2. 对于一个已经打开的描述符，可以调用fcntl，由该函数打开O_NONBLOCK标志。


**11.2 记录锁**

1. 记录锁的功能：当第一个进程正在读或修改文件的某个部分时，使用记录锁可以阻止其他进程修改同一文件区。
2. 记录锁的自动继承和释放的原则：
    1. 锁与进程和文件相关联。这有两重含义：一是进程终止时，它所有的所有记录锁都被释放。二是无论一个描述符何时关闭，该进程通过这一描述符获得的锁都会被释放。
    2. 由fork出的子进程不继承父进程所获得的记录锁。
    3. 在执行exec后，新程序可以获得原程序获得的记录锁。但是如果对文件描述符设置了执行时关闭的标志，则按照原则1，将释放锁。






